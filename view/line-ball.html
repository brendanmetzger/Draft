<article>
  <blockquote>
    <p><q>Jesus Aintâ€™t say that.</q></p>
  </blockquote>
  <style type="text/css" media="screen">
    /* <![CDATA[ */
    line {
      stroke: #555;
      stroke-opacity: 0.125;
      stroke-width: 10;
    }

    svg {
      top: 0;
      height: 100vh;
      width: 100vw;
      position: absolute;
    }
    blockquote {
      color: #555;
      font-family: Baskerville;
      font-style: italic;
      transform: translate(0, -50%);
    }
    /* ]]> */
  </style>
  
  <figure id="drawing">
    <figcaption>An geometry experiment</figcaption>
  </figure>
  
  <script type="text/javascript" defer="defer">
    // <![CDATA[
      
      app.prepare(function (evt) {
        var svg = new SVG(document.querySelector('#drawing'), 100,100);

        for (let i = 0; i < 500; i += 1) {
          svg.createElement('line', {
            'x1': Math.random() * 100,
            'y1': Math.random() * 100,
            'x2': 50,
            'y2': 50
          });
        }     
        
        let lines = svg.element.querySelectorAll('line');
        
        addEventListener('mousemove', function (evt) {
          let loc = svg.cursorPoint(evt);
          
          lines.forEach(function (line) {
            let x = parseFloat(line.getAttribute('x1')) - loc.x;
            let y = parseFloat(line.getAttribute('y1')) - loc.y;
            let h = Math.sqrt(x**2 + y**2);
            let r = 10;
            let dash = h - r +( Math.random() * 2);
            line.style.strokeOpacity = (dash < r) ? 0 : 0.125;
            line.style.strokeDasharray = dash;
            line.style.strokeWidth = 100 / 2 - h;
            // let m = (loc.y - y1) / (loc.x - x1);
            // let theta = evt.theta();
            // let r = 5;
            line.setAttribute('x2', loc.x);
            line.setAttribute('y2', loc.y);
          });
        });
        

      });
      

    // ]]>
  </script>
</article>