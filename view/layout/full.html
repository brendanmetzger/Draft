<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>[$title]</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="user-scalable=yes,width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <link rel="stylesheet" href="/css/master.css" type="text/css" media="screen" charset="utf-8" />
    <link rel="stylesheet" href="/css/manage.css" type="text/css" media="screen" charset="utf-8" />
    <script type="text/javascript">
      // <![CDATA[
      addEventListener('DOMContentLoaded', (function(s, js, cb, cache) {
        self.app = {
          include: (...a) => js.push(['src','async'].reduce((s,v,i) => {s[v]=a[i]; return s}, s.cloneNode())),
          release: (evt ) => { let f; while (f = cb.shift()) f.call(app, evt) },
          module : (k   ) => (k in cache) ? cache[k] : app.define.bind(app, k),
          define : (k, f) => (k in cache) ? cache[k] : cache[k] = f,
          mobile : (/mobile|iPhone/i).test(navigator.userAgent),
          remove : (k   ) => delete cache[k],
          prepare: (f, w) => cb.push(f),
        };
        return (evt) => {
          js.filter(s => !s.async).pop().addEventListener('load', app.release);
          js.forEach(Node.prototype.appendChild.bind(document.head));
        };
      })(document.createElement('script'), [], [], Object.create(null)));
      
      document.documentElement.classList.add(['touch','click'][+app.mobile]);
      app.include('/js/app.js', false);
      app.include('/js/locus.js', true);
      app.prepare(function(evt) {
        document.body.addEventListener('dblclick', function(evt) {
          var target = evt.target;
          while(! target.matches('[data-template]')) target = target.parentNode;
          setTimeout(close.bind(window.open(`txmt://open?url=file://${target.dataset.template}`)), 50);
        });
      });
      
      
      // ]]>
    </script>
  </head>
  <body>
    <!--   insert component/header.html   -->
    <!-- replace content -->
    <main>
      <!-- iterate items -->
      <!-- insert content/about.html -->
    </main>
    <!-- insert component/footer.html -->
  </body>
</html>